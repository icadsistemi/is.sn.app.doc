openapi: 3.0.0
x-stoplight:
  id: ff85zzu171gza
info:
  title: Selfnet APP
  version: 1.0.0-beta.7
  description: Selfnet APP public API documentation.
servers:
  - url: 'https://mxp-public-sn-app-api.dev.icadsistemi.com/v1'
    description: Development
  - url: 'https://mxp-public-sn-app-api.prod.icadsistemi.com/v1'
    description: Production
paths:
  /campaigns:
    get:
      summary: Get all reward campaigns
      tags:
        - campaigns
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  campaigns:
                    type: array
                    x-stoplight:
                      id: xcldit0w9tgv1
                    items:
                      $ref: '#/components/schemas/Campaign'
      operationId: get-rewards-campaigns
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
    parameters: []
  '/campaigns/{id}':
    get:
      summary: Retrieve rewards campaign details
      tags:
        - campaigns
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CampaignDetails'
      operationId: get-rewards-campaign-details
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: Campaign ID
  '/campaigns/{id}/rewards':
    get:
      summary: List available rewards
      tags:
        - campaigns
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AvailableRewards'
      operationId: get-rewards
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: Campaign ID
  '/campaigns/{id}/rewards/history':
    get:
      summary: Rewards redemption history
      tags:
        - campaigns
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  rewards:
                    type: array
                    x-stoplight:
                      id: t0yunwico5u3b
                    items:
                      $ref: '#/components/schemas/RewardRedemption'
      operationId: get-rewards-history
      parameters:
        - schema:
            type: string
          in: query
          name: start_range
          description: UNIX datetime
        - schema:
            type: string
          in: query
          name: end_range
          description: UNIX datetime
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: Campaign ID
  /cards:
    get:
      summary: Card List
      tags:
        - cards
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  cards:
                    type: array
                    x-stoplight:
                      id: c6spbq91dos9p
                    items:
                      $ref: '#/components/schemas/Card'
      operationId: get-cards
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
  /cards/pin/dynamic:
    parameters: []
    post:
      summary: Generate Dynamic PIN seeds
      operationId: post-cards-pin-offline
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  cards:
                    type: array
                    x-stoplight:
                      id: 3iwtx9zitx4ht
                    items:
                      $ref: '#/components/schemas/CardOfflinePin'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CardOfflinePinInput'
      tags:
        - cards
  /cards/pin/online:
    parameters: []
    post:
      summary: Generate an online PIN
      operationId: post-cards-pin-online
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CardOnlinePinRequestOutput'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CardOnlinePinRequestInput'
      tags:
        - cards
  /cards/transactions:
    parameters: []
    get:
      summary: Get transactions
      tags:
        - cards
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactions:
                    x-stoplight:
                      id: mu86ei9s8eig3
                    type: array
                    items:
                      $ref: '#/components/schemas/TransactionOutput'
      operationId: get-transactions
      description: Gets a list of the matching transactions
      parameters:
        - schema:
            type: integer
          in: query
          name: card_type
          description: 'card type''s ID (rechargeable, end of month, etc.)'
        - schema:
            type: integer
          in: query
          name: date_start
          description: UNIX datetime
        - schema:
            type: integer
          in: query
          name: date_end
          description: UNIX datetime
        - schema:
            type: boolean
            enum:
              - oil
              - nonoil
          in: query
          name: oil
          description: 'true to get only oil transactions, false to get only nonoil transactions'
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
  '/cards/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: Card ID
    get:
      summary: Card details
      tags:
        - cards
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CardDetails'
      operationId: get-cards-id
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
    patch:
      summary: ''
      operationId: patch-cards-id
      responses:
        '204':
          description: No Content
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CardInput'
      tags:
        - cards
  '/cards/{id}/movements':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Retrieve a list of all the movements by card
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  movements:
                    type: array
                    x-stoplight:
                      id: v8a6qocs7nn2c
                    items:
                      $ref: '#/components/schemas/CardMovement'
      operationId: get-cards-id-movements
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
  /configuration:
    get:
      summary: Info for basic settings
      tags:
        - configuration
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Configuration'
      operationId: get-configuration
    parameters: []
  '/customers/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Get customer details by id
      tags:
        - customers
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
      operationId: get-customers-id
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
  /ecommerce/fuelcoupons/bills:
    get:
      summary: Get ecommerce active fuelcoupon bills
      tags:
        - ecommerce
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FuelcouponBills'
      operationId: get-ecommerce-fuelcoupon-bills
      description: Get ecommerce active fuelcoupon bills for the current supplier
      parameters:
        - schema:
            type: string
          in: header
          name: supplier-id
          required: true
    parameters: []
  /ecommerce/cards/bills:
    get:
      summary: Get ecommerce active rechargeable card bills
      tags:
        - ecommerce
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RechargeableBills'
      operationId: get-ecommerce-cards-bills
      description: Get ecommerce active rechargeable card bills for the current supplier
      parameters:
        - schema:
            type: string
          in: header
          name: supplier-id
          required: true
  /ecommerce/nexi/customers/contract:
    patch:
      summary: Save Nexi customer contract number
      operationId: patch-ecommerce-nexi-customers-contract
      responses:
        '204':
          description: No Content
          content: {}
      description: Save the Nexi customer contract provided when during payment it was saved a card
      parameters:
        - schema:
            type: string
          in: header
          name: supplier_id
          required: true
      tags:
        - ecommerce
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                  x-stoplight:
                    id: t4mfyolt53qoc
                contract_number:
                  type: string
                  x-stoplight:
                    id: fg8egjzeqeom7
  /ecommerce/nexi/payments/start:
    post:
      summary: ''
      operationId: ecommerce-nexi-payment-start
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  value:
                    type: string
                    x-stoplight:
                      id: 0dh0qv1t68wrh
                    description: the url for calling Nexi cash page
                required:
                  - value
      description: Start a new payment request redirecting to Nexi cash page
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: number
                  x-stoplight:
                    id: 9lxmsu4pp3dm1
                currency:
                  type: string
                  x-stoplight:
                    id: haxzqwg869x1j
                  description: the value is default EUR string
                result_url:
                  type: string
                  x-stoplight:
                    id: 3ptl0xrusuzaq
                  description: callback url to redirect to after Nexi cash actions succesfullt completd
                abort_url:
                  type: string
                  x-stoplight:
                    id: 15lbjppkffenz
                  description: callback url to redirect to after Nexi cash action is aborted
                customer_id:
                  type: number
                  x-stoplight:
                    id: 4hmw7k6a2n2ah
                request_type:
                  type: string
                  x-stoplight:
                    id: qvsfqwfvs7s70
                nexi_configuration:
                  type: string
                  x-stoplight:
                    id: ui1vi66safsql
                  description: base64 encoded ICAD nexi configuration content
                transaction_data:
                  type: string
                  x-stoplight:
                    id: csnufm50m1l1t
                  description: base64 encoded transaction data from ICAD
                icad_payment_type:
                  type: string
                  x-stoplight:
                    id: m1en9vojl84ve
                  description: 'Transaction type (RIC=rechargeable card, BUO=fuelcoupon)'
                contract_number:
                  type: string
                  x-stoplight:
                    id: 72tt2rlrqkm9c
                  description: 'omit for first payment (request_type="PP"), customer saved cotract_number for next payments'
              required:
                - amount
                - currency
                - result_url
                - abort_url
                - customer_id
                - request_type
                - nexi_configuration
                - transaction_data
                - icad_payment_type
      tags:
        - ecommerce
    parameters: []
  /ecommerce/nexi/payments/notification:
    post:
      summary: ''
      operationId: ecommerce-nexi-payment-notification
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  esito:
                    type: string
                    x-stoplight:
                      id: x4xl14u6dn710
                    description: 'result of payment operation (values: ANNULLO, OK)'
                  messaggio:
                    type: string
                    x-stoplight:
                      id: 6kxizo0hq1c80
                    description: message from Nexi abuot payment
                  divisa:
                    type: string
                    x-stoplight:
                      id: vch9hu7vyy4mv
                    description: currency used in payment
                  importo:
                    type: string
                    x-stoplight:
                      id: lql0o6u5tx4s5
                    description: amount paid
                  codtrans:
                    type: string
                    x-stoplight:
                      id: 9gzuei1row0oc
                    description: transaction number
                  num_contratto:
                    type: string
                    x-stoplight:
                      id: qmxe6mptfy9g7
                    description: contract number used between ICAD and Nexi to recall a recurring payment on a saved card (on Nexi system)
                  pan:
                    type: string
                    x-stoplight:
                      id: jb636o1gmgpvn
                    description: card pan (last 3 digits)
                  scadenza_pan:
                    type: string
                    x-stoplight:
                      id: 5mv68z5jlkmmn
                    description: expiration date of the payment card
                  tipoprodotto:
                    type: string
                    x-stoplight:
                      id: xfxzumq1zrmtg
                    description: product type
                  brand:
                    type: string
                    x-stoplight:
                      id: r3e4d5w38h8vj
                    description: payment card brand
                required:
                  - esito
                  - messaggio
                  - divisa
                  - importo
                  - codtrans
                  - num_contratto
                  - pan
                  - scadenza_pan
                  - tipoprodotto
                  - brand
      description: Handle response from Nexi cash page. All queryparams coming from Nexi page callback must be put in internal call
      parameters: []
      tags:
        - ecommerce
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties: {}
        description: All Nexi query string params are passed to this internal notification api
    parameters: []
  /fuelcoupons:
    get:
      summary: List active fuel coupons
      tags:
        - fuelcoupons
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  fuel_coupons:
                    type: array
                    x-stoplight:
                      id: ssgcthg8hayg0
                    items:
                      $ref: '#/components/schemas/FuelCoupon'
      operationId: get-fuelcoupons
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
  '/fuelcoupons/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: Fuel coupon ID
    get:
      summary: Fuel coupon details
      tags:
        - fuelcoupons
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FuelCouponDetails'
      operationId: get-fuelcoupons-id
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
  /fuelcoupons/transactions:
    get:
      summary: GET fuelcoupon transactions
      tags:
        - fuelcoupons
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactions:
                    type: array
                    x-stoplight:
                      id: t8bw0fu5pkiu9
                    items:
                      $ref: '#/components/schemas/FuelCouponTransactions'
      operationId: get-fuelcoupons-transactions
      description: Get fuelcoupon transactions
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier_id
          required: true
        - schema:
            type: integer
          in: query
          name: date_start
          description: Unit datetime
        - schema:
            type: integer
          in: query
          name: date_end
          description: Unit datetime
  /fuelstations/search:
    get:
      summary: GET fuelstations
      tags:
        - fuelstations
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  fuel_stations:
                    type: array
                    x-stoplight:
                      id: 1bb41owrix5ly
                    items:
                      $ref: '#/components/schemas/FuelStation'
      operationId: get-fuelstations
      parameters:
        - schema:
            type: number
          in: query
          name: latitude
          description: 'Optional, used for nearby fuel stations'
        - schema:
            type: number
          in: query
          name: longitude
          description: 'Optional, used for nearby fuel stations'
        - schema:
            type: string
          in: query
          name: articles
          description: 'Optional, used to filter fuel stations'
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
    parameters: []
  /invoices:
    get:
      summary: Get invoices
      tags:
        - invoices
      responses:
        '200':
          description: OK
      operationId: get-invoices
      parameters:
        - schema:
            type: string
            enum:
              - processing
              - historical
          in: query
          name: status
          description: It can be "processing" or "history"
        - schema:
            type: string
          in: query
          name: date_start
          description: UNIX datetime. Used only if type == "processing".
        - schema:
            type: string
          in: query
          name: date_end
          description: UNIX datetme. Used only if type == "processing".
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
      security:
        - Cognito: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                invoices:
                  type: array
                  x-stoplight:
                    id: komg0hmif99ru
                  items:
                    $ref: '#/components/schemas/Invoice'
  '/invoices/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Get invoice details
      tags:
        - invoices
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  details:
                    $ref: '#/components/schemas/InvoiceDetail'
                required:
                  - details
      operationId: get-invoice-id-details
      description: Used to get a list of all details included within the input invoice
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
  '/invoices/{id}/print':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: Id of the requested invoice
    get:
      summary: Get printable invoice PDF
      tags:
        - invoices
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrintableInvoice'
      operationId: get-invoices-id-print
      security:
        - Cognito: []
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
  /recharges:
    get:
      summary: Get all recharges
      tags:
        - recharges
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  recharges:
                    type: array
                    x-stoplight:
                      id: y86wq9njqcdnd
                    items:
                      $ref: '#/components/schemas/Recharge'
      operationId: get-recharges
      parameters:
        - schema:
            type: string
          in: query
          name: date_start
          description: UNIX datetime
        - schema:
            type: string
          in: query
          name: date_end
          description: UNIX datetime
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
  '/recharges/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Get recharge details
      tags:
        - recharges
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RechargeDetails'
      operationId: get-recharges-id
      description: ''
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
          required: true
  /services:
    get:
      summary: Get active services for logged user
      tags:
        - services
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Services'
      operationId: get-services
      parameters:
        - schema:
            type: integer
          in: header
          name: supplier-id
  /suppliers:
    parameters: []
    get:
      summary: Get user info
      tags:
        - suppliers
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Suppliers'
      operationId: get-users-id
      description: Get all the suppliers available for the logged user
  '/suppliers/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Get supplier details by id
      tags:
        - suppliers
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Supplier'
      operationId: get-suppliers-id
      description: Get details of a supplier using the input ID
  /users/privacy/terms:
    get:
      summary: Get user terms and conditions approvals
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Terms'
      operationId: get-user-terms-and-conditions
      tags:
        - users
    parameters: []
    put:
      summary: Write user terms and conditions approvals
      operationId: put-users-privacy-terms
      responses:
        '200':
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Terms'
      tags:
        - users
  '/versions/{platform}':
    get:
      summary: Get latest app version
      tags:
        - versions
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Version'
      operationId: get-versions
    parameters:
      - schema:
          type: string
        name: platform
        in: path
        required: true
        description: Can be ios or android
components:
  schemas:
    AvailableRewards:
      title: AvailableRewards
      x-stoplight:
        id: fr57ne7dwt7y4
      type: object
      description: A campaign with all its rewards
      properties:
        rewards:
          type: array
          x-stoplight:
            id: 69fgsbhyaynsi
          description: |
            Arrray of available rewards
          items:
            $ref: '#/components/schemas/Reward'
    Campaign:
      title: Campaign
      x-stoplight:
        id: 0tdi843upw9mq
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
          x-stoplight:
            id: 3fdpr99mdi647
        is_active:
          type: boolean
          x-stoplight:
            id: wpo4df4ygniwx
    CampaignDetails:
      title: CampaignDetails
      x-stoplight:
        id: vdss6rx9uo50y
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
          x-stoplight:
            id: 3fdpr99mdi647
        is_active:
          type: boolean
          x-stoplight:
            id: wpo4df4ygniwx
        points:
          type: integer
          x-stoplight:
            id: 7es7wtxn7fq6n
        start_date:
          type: string
          x-stoplight:
            id: xk1vdq2vbfr1f
          format: date-time
        end_date:
          type: string
          x-stoplight:
            id: t5kgvbgjule2i
          format: date-time
    Card:
      title: Card
      x-stoplight:
        id: ui8svs2lq963m
      type: object
      properties:
        id:
          type: integer
        code:
          type: string
          x-stoplight:
            id: 4czx7eeevzile
        type:
          type: integer
          x-stoplight:
            id: 8vrxk1lghlpmq
          description: 'Id of the card type, used for look up'
        is_enabled:
          type: boolean
          x-stoplight:
            id: 2fjdwjjh8g6az
        pan:
          type: string
          x-stoplight:
            id: cmiwucgk52jg0
        otp_pin:
          type: boolean
          x-stoplight:
            id: c9tynxan6dhrr
          description: True if this card has dynamic or online pin enabled
        vehicle:
          type: object
          x-stoplight:
            id: wdzy36by588bm
          properties:
            plate:
              type: string
              x-stoplight:
                id: om75am1ghbo2a
            driver:
              type: string
              x-stoplight:
                id: v4jgih6nl96ko
    CardDetails:
      title: CardDetails
      x-stoplight:
        id: hq2l6i2tjrrpe
      type: object
      properties:
        id:
          type: integer
        code:
          type: string
          x-stoplight:
            id: dkma05dhehpa2
        pan:
          type: string
          x-stoplight:
            id: cpn47j3ck8d1u
        type:
          type: integer
          x-stoplight:
            id: i2fojlseu17lx
          description: 'Id of the card type, used for look up'
        is_enabled:
          type: boolean
          x-stoplight:
            id: v2lmxruu2vhdk
        expiration_date:
          type: string
          x-stoplight:
            id: 9g28b06waxmec
          format: date
        residue:
          type: number
          x-stoplight:
            id: j5e7quphl1zw6
        daily_residue:
          type: number
          x-stoplight:
            id: c9286rm4j2xpv
        indoor:
          type: boolean
          x-stoplight:
            id: k6avhm2pm91uj
        outdoor:
          type: boolean
          x-stoplight:
            id: gvwqik6f6aarp
        vehicle:
          type: object
          x-stoplight:
            id: twxz90ogrjrld
          properties:
            plate:
              type: string
              x-stoplight:
                id: mwc5kr35fm0y6
            driver:
              type: string
              x-stoplight:
                id: n4z0p4bj3m60c
    CardInput:
      title: CardInput
      x-stoplight:
        id: ht6jdydr3tyt8
      type: object
      properties:
        is_enabled:
          type: boolean
          x-stoplight:
            id: zdv6j0siho952
    CardMovement:
      title: CardMovement
      x-stoplight:
        id: lrls7j4jecoiq
      type: object
      properties:
        id:
          type: integer
        fuel_station:
          type: object
          x-stoplight:
            id: 6mj6305kqlv83
          properties:
            name:
              type: string
              x-stoplight:
                id: tdg7ngov6g61z
        amount:
          type: number
          x-stoplight:
            id: vavlcvh2pnuoz
        quantity:
          type: number
          x-stoplight:
            id: k3v2rgcyxldrw
        datetime:
          type: string
          x-stoplight:
            id: a89g55u73k2lo
          format: date-time
        is_oil:
          type: boolean
          x-stoplight:
            id: rny66ls94jz63
        recharge:
          type: boolean
          x-stoplight:
            id: lzi78e5ymgit1
        reward_claim:
          type: boolean
          x-stoplight:
            id: l8n41fq9y4qfg
    CardOnlinePin:
      title: CardOnlinePin
      x-stoplight:
        id: 3gt1s1jg0uyrr
      type: object
      properties:
        pan:
          type: string
          x-stoplight:
            id: 1qcsiwy5ofzrw
        number:
          type: integer
          x-stoplight:
            id: lufayfzl74vqb
        vehicle_plate:
          type: string
          x-stoplight:
            id: lb6gv5p3utvg2
    CardOnlinePinRequestInput:
      title: CardOnlinePinRequestInput
      x-stoplight:
        id: 94sk4j9z6z4hu
      type: object
      properties:
        card_pan:
          type: string
          x-stoplight:
            id: 1qcsiwy5ofzrw
    CardOnlinePinRequestOutput:
      title: CardOnlinePinRequestOutput
      x-stoplight:
        id: xh75bq4uw0uui
      type: object
      properties:
        pin:
          type: string
          x-stoplight:
            id: 1qcsiwy5ofzrw
    CardOfflinePin:
      title: CardOfflinePin
      x-stoplight:
        id: 92s5t4cjz0ml6
      type: object
      properties:
        pan:
          type: string
          x-stoplight:
            id: 1qcsiwy5ofzrw
        number:
          type: integer
          x-stoplight:
            id: lufayfzl74vqb
        totp_seed:
          type: string
          x-stoplight:
            id: 51hqnal58tfvh
        vehicle_plate:
          type: string
          x-stoplight:
            id: iexfkybpl2idt
    CardOfflinePinInput:
      title: CardOfflinePinInput
      x-stoplight:
        id: jpmm45f4pn7kn
      type: object
      properties:
        replace:
          type: boolean
          x-stoplight:
            id: 1qcsiwy5ofzrw
    Configuration:
      title: Configuration
      x-stoplight:
        id: uc18ur7i0wznr
      type: object
      properties:
        product_families:
          type: array
          x-stoplight:
            id: xna473gbitqni
          items:
            x-stoplight:
              id: y7e2j0ynoit8e
            type: object
            properties:
              id:
                type: integer
                x-stoplight:
                  id: abhav1804k248
              name:
                type: string
                x-stoplight:
                  id: dfslmcuauay6a
        payment_methods:
          type: array
          x-stoplight:
            id: pijv3xzyc39rj
          items:
            x-stoplight:
              id: 7mn8vzdrsul3w
            type: object
            properties:
              id:
                type: integer
                x-stoplight:
                  id: l1so9toxmay8y
              name:
                type: string
                x-stoplight:
                  id: bqukawav6gyhj
        card_types:
          type: array
          x-stoplight:
            id: c804okwmhazrl
          items:
            x-stoplight:
              id: dja1bnvb8eagu
            type: object
            properties:
              id:
                type: integer
                x-stoplight:
                  id: 62aqulwe794mp
              name:
                type: string
                x-stoplight:
                  id: 06w4dwzdkc7q1
        fuel_coupon_types:
          type: array
          x-stoplight:
            id: lr6fg66cspf7m
          items:
            x-stoplight:
              id: gnvvwprr2pc2r
            type: object
            properties:
              id:
                type: integer
                x-stoplight:
                  id: vfqkv58dewj3d
              name:
                type: string
                x-stoplight:
                  id: uvn21hdlml2af
        measure_units:
          type: array
          x-stoplight:
            id: ecqt3isulse7y
          items:
            x-stoplight:
              id: m50spida877r9
            type: object
            properties:
              id:
                type: integer
                x-stoplight:
                  id: ab6yr2cgoc8tr
              name:
                type: string
                x-stoplight:
                  id: m417ujyr2ia43
    Customer:
      title: Customer
      x-stoplight:
        id: bha7c8h3a1bkg
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
          x-stoplight:
            id: mbik7xu5ztna1
        city:
          type: string
          x-stoplight:
            id: yv4v2va6373ja
        address:
          type: string
          x-stoplight:
            id: 68tsthe3vso8i
        vat:
          type: string
          x-stoplight:
            id: i5zltojacnuxf
        fiscal_code:
          type: string
          x-stoplight:
            id: zs8w7syr22447
        email:
          type: string
          x-stoplight:
            id: i9cua94v0n1ma
          format: email
        phone_number:
          type: string
          x-stoplight:
            id: ph9ibnjt0oq9j
        pec:
          type: string
          x-stoplight:
            id: r6ow1i3sjc82r
        sdi_code:
          type: string
          x-stoplight:
            id: mwefcrw9n5peh
        zip_code:
          type: string
          x-stoplight:
            id: 1m6vxggi98zbm
        province:
          type: string
          x-stoplight:
            id: xg249pua2raw8
        is_fee_active:
          type: boolean
          x-stoplight:
            id: 2e7vxsevhd6rj
        contract_number:
          type: string
          x-stoplight:
            id: iykd73itkv6gf
        rebate_level:
          type: integer
          x-stoplight:
            id: ahvyudds94w5q
        rebate:
          type: number
          x-stoplight:
            id: w94r22gtiv3w4
        has_customer_recharge:
          type: boolean
          x-stoplight:
            id: xzf3av4vkax0a
        residue:
          type: number
          x-stoplight:
            id: ajjg3alwbn8pr
        show_balance:
          type: boolean
          x-stoplight:
            id: 8dra6ocdpnu2t
          description: 'If True, the various customer and card balances are shown within the app'
    FuelCoupon:
      title: FuelCoupon
      x-stoplight:
        id: mn168mq6fhhzs
      type: object
      properties:
        id:
          type: integer
        code:
          type: string
          x-stoplight:
            id: nv1q5pheoeuna
          description: Fuel coupon code
        expiration_date:
          type: string
          x-stoplight:
            id: 8tfw0e57cl3i4
          format: date
        type:
          type: integer
          x-stoplight:
            id: 6bmsu3klayd1k
          description: 'Id of the fuel coupon type, used for look up'
        value:
          type: integer
          x-stoplight:
            id: w1l1601c67nqv
        residue:
          type: number
          x-stoplight:
            id: w179eke481h5z
    FuelcouponBills:
      title: FuelcouponBills
      x-stoplight:
        id: 5s9nex2le90th
      type: object
      description: Bills for fuelcoupons
      properties:
        id:
          type: integer
        supplier_id:
          type: integer
          x-stoplight:
            id: agj44i0c0nql2
        amount:
          type: number
          x-stoplight:
            id: 827bsdjfr03xe
        is_ecommerce_active:
          type: boolean
          x-stoplight:
            id: t0a52jfvfwge5
    FuelCouponDetails:
      title: FuelCouponDetails
      x-stoplight:
        id: wdke87sdt6b0h
      type: object
      properties:
        id:
          type: integer
        indoor:
          type: boolean
          x-stoplight:
            id: iz4uh2xkrlxh7
        outdoor:
          type: boolean
          x-stoplight:
            id: owkiiqwcvovst
        value:
          type: string
          x-stoplight:
            id: j7zvc47321b1v
          description: Value to be rendered in the QRcode / barcode
        residue:
          type: number
          x-stoplight:
            id: htlw37w6f62w1
          description: Residue of the fuel coupon
        expiration_date:
          type: string
          x-stoplight:
            id: 3h5txjkrzj3yz
          format: date
        amount:
          type: number
          x-stoplight:
            id: bltgm93oj68iy
    FuelCouponTransactions:
      title: FuelCouponTransactions
      x-stoplight:
        id: wuj0e1jr0gh3k
      type: object
      properties:
        datetime:
          type: string
          x-stoplight:
            id: 8h2bg248as5h8
          format: date-time
        fuelstation:
          type: object
          x-stoplight:
            id: iz4uh2xkrlxh7
          properties:
            name:
              type: string
              x-stoplight:
                id: cgbf462u7j0sj
        article:
          type: object
          x-stoplight:
            id: owkiiqwcvovst
          properties:
            name:
              type: string
              x-stoplight:
                id: hoy5as0hv9j1r
            measure_unit:
              type: string
              x-stoplight:
                id: rkkkzx0wfayhz
            quantity:
              type: number
              x-stoplight:
                id: 0warktb30m55q
            precision:
              type: integer
              x-stoplight:
                id: 7qjn35tm4cm9n
            unit_price:
              type: integer
              x-stoplight:
                id: bgjxpud2a1ft3
        supply:
          type: object
          x-stoplight:
            id: j7zvc47321b1v
          description: Value to be rendered in the QRcode / barcode
          properties:
            amount:
              type: number
              x-stoplight:
                id: 7pygplojku3ao
              description: amount ot the current transaction
            total_amount:
              type: number
              x-stoplight:
                id: 18bnwlqntmifc
              description: total amount if the transaction involves more than one fuelcoupon
            is_oil:
              type: boolean
              x-stoplight:
                id: ffxn3ptril8yx
              description: 'true the transaction is on oil products, nonoil otherwise'
        fuelcoupon:
          type: object
          x-stoplight:
            id: 74yd65r80v4ib
          properties:
            amount:
              type: number
              x-stoplight:
                id: 3w27j1ft91dv2
            code:
              type: integer
              x-stoplight:
                id: fj3vpxs94669q
      description: ''
    FuelStation:
      title: FuelStation
      x-stoplight:
        id: hnosbaortwcvo
      type: object
      properties:
        id:
          type: integer
          x-stoplight:
            id: 04xdrczugq69k
        latitude:
          type: number
          x-stoplight:
            id: nlrqmpgkglhrd
        longitude:
          type: number
          x-stoplight:
            id: s50rw9vka97j8
        address:
          type: string
          x-stoplight:
            id: gs48zxthggw3f
        city:
          type: string
          x-stoplight:
            id: w1zwdh3sosnut
        name:
          type: string
          x-stoplight:
            id: oygiilx0oai67
        flag:
          type: string
          x-stoplight:
            id: u9hm2kd8gcn2o
        distance:
          type: number
          x-stoplight:
            id: 6zhnvrmk0tx2t
          description: |
            The value is set when the gps coordinates are sent as input in search fuel stations method. The value is the cartesian distance in km from input gps to the current fuel station
        zip_code:
          type: string
          x-stoplight:
            id: a3oes5nq0z4pu
        phone_number:
          type: string
          x-stoplight:
            id: bufc9wm1kv858
    Invoice:
      title: Invoice
      x-stoplight:
        id: mwp240vykhj95
      type: object
      properties:
        amount:
          type: number
          x-stoplight:
            id: mnn2j4xvpjvpx
        document_type_code:
          type: string
          x-stoplight:
            id: 6l3hvd416s4q9
          description: 'Id of the invoice document type, used for look up'
        error_info:
          type: string
          x-stoplight:
            id: 1q6h50zo0nvkt
        id:
          type: integer
          x-stoplight:
            id: 86ai4wd9he9k2
        is_immediate:
          type: string
          x-stoplight:
            id: wf9swegx1nj8k
        issuing_date:
          type: string
          x-stoplight:
            id: 8l8ek87r71z09
          format: date
        status:
          type: string
          x-stoplight:
            id: ana3d68obuf3n
        number:
          type: string
          x-stoplight:
            id: mgpuxsbo40ho7
        year:
          type: integer
          x-stoplight:
            id: k97j7tqkoihp6
    InvoiceDetail:
      title: InvoiceDetail
      x-stoplight:
        id: 9qylnkcq8udo0
      type: object
      description: A single detail referring to an invoiced transaction
      properties:
        article:
          type: object
          x-stoplight:
            id: k0x1qjovk36ft
          properties:
            id:
              type: integer
              x-stoplight:
                id: mqmen5b4sjnuz
            code:
              type: string
              x-stoplight:
                id: rseb25lkc61hj
            description:
              type: string
              x-stoplight:
                id: xg4ehcrtp1haq
        card_id:
          type: integer
          x-stoplight:
            id: iqcmzhc0o39nm
        ddt_number:
          type: string
          x-stoplight:
            id: rdelgx83x5l2v
        fuel_station:
          type: object
          x-stoplight:
            id: leedhdhixycdc
          properties:
            full_address:
              type: string
              x-stoplight:
                id: g8wsgbqxghhm3
            address:
              type: string
              x-stoplight:
                id: 0dupxg2tww2xv
            city:
              type: string
              x-stoplight:
                id: blc9jzhd43s3v
            flag:
              type: string
              x-stoplight:
                id: sw3v472gqah49
            name:
              type: string
              x-stoplight:
                id: 8nw774an5293x
            phone_number:
              type: string
              x-stoplight:
                id: 1l6bq3alf4yo5
            cellphone_number:
              type: string
              x-stoplight:
                id: irz2s6e2gpy2j
        id:
          type: integer
          x-stoplight:
            id: 7noltrs6n05dq
        invoice_id:
          type: integer
          x-stoplight:
            id: lginfqcmgxxdx
        km:
          type: integer
          x-stoplight:
            id: ay3sr3qhh53dz
        payments:
          type: object
          x-stoplight:
            id: kxew6m1p1hc7f
          properties:
            payment_method_code:
              type: string
              x-stoplight:
                id: lnrqjkuxp9qjf
            amount:
              type: number
              x-stoplight:
                id: 5yvnqz4lfoanq
            cab:
              type: string
              x-stoplight:
                id: 7nw812ff6z6jg
            iban:
              type: string
              x-stoplight:
                id: oz5pmkmi76r5p
            abi:
              type: string
              x-stoplight:
                id: pjv8920ygsj7c
            id:
              type: integer
              x-stoplight:
                id: cbwza7u65id6i
            bic:
              type: string
              x-stoplight:
                id: dea6xf8anxeuq
        quantity:
          type: number
          x-stoplight:
            id: 41rr0e4vqb5xi
        receipt_number:
          type: string
          x-stoplight:
            id: m8o7xdnmvvqie
        total_amount:
          type: number
          x-stoplight:
            id: ck9ogoasbm81c
        transaction_timestamp:
          type: string
          x-stoplight:
            id: 9klz1z0wak4h5
          format: time
        unit_of_measure:
          type: string
          x-stoplight:
            id: 99atx8w6ggvaf
        unit_price:
          type: number
          x-stoplight:
            id: ba8dpcpxjg6eq
        vehicle:
          type: object
          x-stoplight:
            id: zszy3ojlljpni
          properties:
            plate:
              type: string
              x-stoplight:
                id: uj1b87lopjbmy
            model:
              type: string
              x-stoplight:
                id: 3je1dhjf3qe78
    Price:
      title: Prices
      x-stoplight:
        id: hdhifgrj9qkxx
      type: object
      properties:
        price_level:
          type: integer
          x-stoplight:
            id: uu419r7j4zyno
        article_name:
          type: string
          x-stoplight:
            id: mvok01gs4byqw
        price:
          type: integer
          x-stoplight:
            id: i8z43d6ogjbbe
    PrintableInvoice:
      title: PrintableInvoice
      x-stoplight:
        id: ciuyui668ac1n
      type: object
      properties:
        id:
          type: integer
        base64:
          type: string
          x-stoplight:
            id: d4o5q1ltjfksm
          description: Base64 string representing the invoice pdf
    Recharge:
      title: Recharge
      x-stoplight:
        id: a9u2otdthzpwy
      type: object
      properties:
        id:
          type: integer
        datetime:
          type: string
          x-stoplight:
            id: qjgbx3dbir2lr
        amount:
          type: string
          x-stoplight:
            id: tfcduyof411dd
    RechargeDetails:
      title: RechargeDetails
      x-stoplight:
        id: z6qujeewio9a1
      type: object
      properties:
        id:
          type: integer
        residue:
          type: number
          x-stoplight:
            id: 7hilp81zd5hnn
        card:
          type: object
          x-stoplight:
            id: 0b9s2j1bhbgpq
          properties:
            pan:
              type: string
              x-stoplight:
                id: mwbbuehh0v0ou
            code:
              type: string
              x-stoplight:
                id: 5zfhfkbz410sr
        fuel_station:
          type: object
          x-stoplight:
            id: 5spfwfp5bu42f
          properties:
            name:
              type: string
              x-stoplight:
                id: v7jfchbma82e7
        payment:
          type: object
          x-stoplight:
            id: rpxpqvnber3yy
          properties:
            amount:
              type: number
              x-stoplight:
                id: mw9m278blwvlq
            rebate:
              type: number
              x-stoplight:
                id: 36zbozr8hf7q7
            method:
              type: integer
              x-stoplight:
                id: 5ockm6wtpxxrh
              description: 'Id of the payment method type, used for look up'
    RechargeableBills:
      title: RechargeableBills
      x-stoplight:
        id: kbjcadsz7t7rg
      type: object
      description: Bills for rechargeable cards
      properties:
        id:
          type: integer
        supplier_id:
          type: integer
          x-stoplight:
            id: 5amep6szrv1su
        amount:
          type: number
          x-stoplight:
            id: 11ppke17srrvq
        rebate_levels:
          type: object
          x-stoplight:
            id: 1lekkqj5caf7a
          properties:
            id:
              type: integer
              x-stoplight:
                id: p8pz6uzf1b8aj
            rebate:
              type: number
              x-stoplight:
                id: xlu5evikl5xex
        is_ecommerce_active:
          type: boolean
          x-stoplight:
            id: dzpc0x3kswonc
    Reward:
      title: Reward
      x-stoplight:
        id: 4gitxn0t0lbks
      type: object
      properties:
        id:
          type: string
          description: |
            id reward
        name:
          type: string
          x-stoplight:
            id: ryxcec4luvqt7
          description: |
            reward name
        points:
          type: integer
          x-stoplight:
            id: fntxqabzgus2o
        is_fuel_coupon:
          type: boolean
          x-stoplight:
            id: 4yrs3xua2vzxi
          description: |
            true if the reward is a fuelcoupon
    RewardRedemption:
      title: RewardRedemption
      x-stoplight:
        id: 3btmj3062jcvm
      type: object
      properties:
        datetime:
          type: string
          x-stoplight:
            id: oop1xc00u7v26
          format: date-time
        reward:
          type: object
          x-stoplight:
            id: a255fpeuinlsx
          properties:
            name:
              type: string
              x-stoplight:
                id: 29ivo9h75r97d
            points:
              type: integer
              x-stoplight:
                id: 42849zbra3fc1
        fuel_station:
          type: object
          x-stoplight:
            id: 6733fgqmm60ws
          properties:
            name:
              type: string
              x-stoplight:
                id: jyl34vm6kezx9
    Services:
      title: Services
      x-stoplight:
        id: r4ye5gvzstjqq
      type: object
      properties:
        services:
          type: object
          x-stoplight:
            id: 2kav47cw2c3ph
          properties:
            dynamic_pin:
              type: object
              x-stoplight:
                id: ximn5rd700c1g
              properties:
                is_active:
                  type: boolean
                  x-stoplight:
                    id: kj9ukonuxku55
            online_pin:
              type: object
              x-stoplight:
                id: org83zovlnxpa
              properties:
                is_active:
                  type: boolean
                  x-stoplight:
                    id: z9nume41drsns
            ecommerce:
              type: object
              x-stoplight:
                id: mfkrlxybh2u5u
              properties:
                is_active:
                  type: boolean
                  x-stoplight:
                    id: jmym5fyi3ng8f
            recharge:
              type: object
              x-stoplight:
                id: ysvkvzxw14110
              properties:
                is_active:
                  type: boolean
                  x-stoplight:
                    id: 5mkpwcki4plwr
            fuelcoupon:
              type: object
              x-stoplight:
                id: lf87icqehhnmk
              properties:
                is_active:
                  type: boolean
                  x-stoplight:
                    id: 03gfhbr8asn2b
    Supplier:
      title: Supplier
      x-stoplight:
        id: 8mgsino8wiokn
      type: object
      properties:
        id:
          type: integer
        customer:
          type: object
          x-stoplight:
            id: 99k839kqu4muz
          properties:
            id:
              type: integer
              x-stoplight:
                id: tszl9ajcnybwl
            name:
              type: string
              x-stoplight:
                id: vnng2vb4hhzr0
            individual:
              type: integer
              x-stoplight:
                id: 5zweh1cu3oevh
        card_types:
          type: array
          x-stoplight:
            id: lwedhms3u01ab
          description: 'Id of the card types available for the logged user '
          items:
            x-stoplight:
              id: ac3juv4fah7w9
            type: integer
        ecommerce:
          type: object
          x-stoplight:
            id: ey7umckgvys0v
          properties:
            rechargeable_fee_type:
              type: boolean
              x-stoplight:
                id: d56arbldwxuu5
              description: 'true: fee in €, otherwise %'
            rechargeable_fee:
              type: number
              x-stoplight:
                id: f9bxqrefvnray
            fuelcoupon_fee_type:
              type: boolean
              x-stoplight:
                id: dt9fxumnbn8dg
              description: 'true: fee in €, otherwise %'
            fuelcoupon_fee:
              type: number
              x-stoplight:
                id: 5rb54uic28vi8
            is_active_fuelcoupon_onetime:
              type: boolean
              x-stoplight:
                id: je1qd48vqrcdx
            is_active_fuelcoupon_deductible:
              type: boolean
              x-stoplight:
                id: f039p30kiogfr
            fuelcoupon_expiration_in_years:
              type: integer
              x-stoplight:
                id: cu9v7e3f9cb23
            nexi_configuration:
              type: string
              x-stoplight:
                id: vhq1esjz1jfdz
              description: '"[{\"id\":0,\"tipo\":\"Easy\",\"alias\":\"ALIAS_WEB_00014162\",\"secretKey\":\"WJ8PHHAKUWDKXOKL2TVU5JONUACFMT4M\",\"gruppo\":\"GRP_24264\"},{\"id\":1,\"tipo\":\"Pro\",\"alias\":\"ALIAS_RICO_00014163\",\"secretKey\":\"BPF4Z5UT59LU5NNL49K4KV1HS0SBA2MI\",\"gruppo\":\"GRP_24264\"}]"'
    Suppliers:
      title: Suppliers
      x-stoplight:
        id: wbx9nt87budrs
      type: object
      properties:
        suppliers:
          type: array
          x-stoplight:
            id: gr87yjrgjy6b4
          items:
            x-stoplight:
              id: wyvi0pmcd53lm
            type: object
            properties:
              id:
                type: integer
                x-stoplight:
                  id: k1x32zt2ehv7d
              name:
                type: string
                x-stoplight:
                  id: 4mx498vikooxz
    Terms:
      type: object
      x-stoplight:
        id: c8akmja0z39ef
      properties:
        app_privacy:
          type: boolean
        terms_and_conditions:
          type: boolean
        third_parties:
          type: boolean
        marketing:
          type: boolean
      x-examples:
        Example 1:
          app_privacy: true
          terms_and_conditions: true
          third_parties: true
          marketing: true
      title: ''
    TransactionOutput:
      title: TransactionOutput
      x-stoplight:
        id: qxpfdaufrou29
      type: object
      properties:
        datetime:
          type: string
          x-stoplight:
            id: 2yf1t4uzchp4v
          format: date-time
        fuel_station:
          type: object
          x-stoplight:
            id: wtaduw2nz8whp
          properties:
            name:
              type: string
              x-stoplight:
                id: awhx7i604vlwi
        vehicle:
          type: object
          x-stoplight:
            id: og89xoevq96dz
          description: Only for OIL transactions
          properties:
            plate:
              type: string
              x-stoplight:
                id: ettue6x5nprun
            km:
              type: integer
              x-stoplight:
                id: kbavtx3skr2qx
        article:
          type: object
          x-stoplight:
            id: yd7bdv7gjz13t
          properties:
            name:
              type: string
              x-stoplight:
                id: z78v6flckjuu1
            measure_unit:
              type: string
              x-stoplight:
                id: g1irmd0yfoa76
            quantity:
              type: number
              x-stoplight:
                id: 6dpd4nkaof6ej
        supply:
          type: object
          x-stoplight:
            id: bhvi6v0pog8jg
          properties:
            gross_amount:
              type: number
              x-stoplight:
                id: fc3vtwjuj9uqn
            net_amount:
              type: number
              x-stoplight:
                id: gsb7l3mvddnls
            gross_unit_price:
              type: number
              x-stoplight:
                id: s8nqrdsnk9dqx
            net_unit_price:
              type: number
              x-stoplight:
                id: 65bmppdc47ve1
        card:
          type: object
          x-stoplight:
            id: cwaflqdpho236
          properties:
            code:
              type: integer
              x-stoplight:
                id: d8tjwk4sdvh0z
            pan:
              type: string
              x-stoplight:
                id: 4v9o1rz1i8wue
            type:
              type: integer
              x-stoplight:
                id: vn2x2onbeaelg
            residue:
              type: number
              x-stoplight:
                id: 9tvb170jbvz3d
      description: ''
    Version:
      title: Version
      x-stoplight:
        id: 0pnc1m0rnh7o0
      type: object
      properties:
        type:
          type: string
          x-stoplight:
            id: zunzswce56r99
        version:
          type: string
          x-stoplight:
            id: ffmppj89bsc3y
  securitySchemes:
    Cognito:
      type: oauth2
      flows:
        password:
          tokenUrl: ''
          refreshUrl: ''
          scopes: {}
security:
  - Cognito: []
